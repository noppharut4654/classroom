<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ลงทะเบียนเรียน</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="register.css" rel="stylesheet">
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
      <script>
        const LIFF_ID = '2006490627-0zX7PemZ';
    </script>
  
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">Course Platform</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav me-auto">
        <li class="nav-item">
            <a class="nav-link" href="index.html">หน้าแรก</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="courses.html">คอร์สเรียน</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="blog.html">บทความ</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="faq.html">คำถามที่พบบ่อย</a>
        </li>
    </ul>
    
    <!-- User Profile Area -->
    <div id="userProfileNav" class="d-none">
        <div class="dropdown">
            <div class="d-flex align-items-center" role="button" data-bs-toggle="dropdown">
                <img id="userAvatarNav" src="" alt="User Avatar" class="rounded-circle me-2" style="width: 32px; height: 32px;">
                <span id="userNameNav" class="me-2"></span>
                <i class="bi bi-chevron-down"></i>
            </div>
            <ul class="dropdown-menu dropdown-menu-end">
                <li><a class="dropdown-item" href="my-courses.html">
                    <i class="bi bi-collection-play me-2"></i>คอร์สของฉัน
                </a></li>
                <li><a class="dropdown-item" href="learning-history.html">
                    <i class="bi bi-clock-history me-2"></i>ประวัติการเรียน
                </a></li>
                <li><a class="dropdown-item" href="notifications.html">
                    <i class="bi bi-bell me-2"></i>การแจ้งเตือน
                </a></li>
                <li><a class="dropdown-item" href="account-settings.html">
                    <i class="bi bi-gear me-2"></i>ตั้งค่าบัญชี
                </a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item text-danger" href="#" onclick="handleLogout()">
                    <i class="bi bi-box-arrow-right me-2"></i>ออกจากระบบ
                </a></li>
            </ul>
        </div>
    </div>
    <div id="loginButtons" class="d-flex">
        <button class="btn btn-outline-primary me-2" onclick="liff.login()">เข้าสู่ระบบ</button>
        <button class="btn btn-primary" onclick="window.location.href='register.html'">สมัครสมาชิก</button>
    </div>
</div>
        </div>
    </nav>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
    </div>

    <div class="container registration-container">
        <!-- Registration Header -->
        <div class="registration-header">
            <h1>ลงทะเบียนเรียน</h1>
            <p class="text-muted">กรุณากรอกข้อมูลให้ครบถ้วนเพื่อลงทะเบียนเรียน</p>
        </div>

        <!-- User Profile -->
        <div class="user-profile d-none" id="userProfile">
            <div class="d-flex align-items-center">
                <img id="userAvatar" src="" alt="User Avatar" class="user-avatar me-3">
                <div>
                    <h5 id="userName" class="mb-1"></h5>
                    <p id="userEmail" class="text-muted mb-0"></p>
                </div>
            </div>
        </div>

        <!-- Course Summary -->
        <div class="course-summary">
            <h4 id="courseTitle"></h4>
            <div class="d-flex justify-content-between align-items-center mt-3">
                <div>
                    <p id="courseDuration" class="mb-1">
                        <i class="bi bi-clock"></i> <span>0</span> ชั่วโมง
                    </p>
                    <p id="courseLessons" class="mb-0">
                        <i class="bi bi-play-circle"></i> <span>0</span> บทเรียน
                    </p>
                </div>
                <div class="text-end">
    <p class="text-muted mb-1">ราคา</p>
    <p class="course-price">
        <span id="coursePrice" class="free-badge"></span>
    </p>
</div>
            </div>
        </div>

        <!-- Registration Form -->
        <form id="registrationForm" class="registration-form">
            <!-- Contact Information -->
            <div class="form-section">
                <h5 class="section-title">ข้อมูลติดต่อ</h5>
                <div class="form-floating mb-3">
                    <input type="email" class="form-control" id="email" placeholder="อีเมล" required>
                    <label for="email">อีเมล</label>
                    <div class="invalid-feedback">กรุณากรอกอีเมลที่ถูกต้อง</div>
                </div>
                <div class="form-floating mb-3">
    <input type="tel" class="form-control" id="phone" 
           placeholder="เบอร์โทรศัพท์" 
           pattern="0[0-9]{9}"
           minlength="10"
           maxlength="10"
           required>
    <label for="phone">เบอร์โทรศัพท์</label>
    <div class="invalid-feedback">
        กรุณากรอกเบอร์โทรศัพท์ 10 หลัก (ขึ้นต้นด้วย 0)
    </div>
</div>
            </div>

            <!-- Payment Section -->
<div class="form-section">
    <h5 class="section-title">ข้อมูลการชำระเงิน</h5>
    <div class="alert alert-info mb-4">
        <h6 class="alert-heading mb-2"><i class="bi bi-info-circle me-2"></i>รูปแบบการชำระเงิน</h6>
        <p class="mb-2">คุณสามารถเลือกโอนเงินสนับสนุนเข้าบัญชีโรงเรียน หรือ สนับสนุนค่ากาแฟผู้สอน หรือจะเลือกทั้ง 2 รูปแบบก็ได้:</p>
        <ol class="mb-0">
            <li><strong>โอนเงินเข้าบัญชีโรงเรียน:</strong>
                <ul>
                    <li>เงินจะเข้าบัญชีโรงเรียนบ้านวังด้ง</li>
                    <li>ได้รับการลดหย่อนภาษี 2 เท่าของยอดที่โอน</li>
                    <li>ราคาตามที่กำหนดของคอร์ส</li>
                </ul>
            </li>
            <li><strong>สนับสนุนค่ากาแฟ:</strong>
                <ul>
                    <li>เป็นกำลังใจให้ผู้พัฒนาระบบ</li>
                    <li>สนับสนุนเท่าไหร่ก็ได้ตามกำลังและความเต็มใจ</li>
                    <li>ชำระผ่าน QR พร้อมเพย์</li>
                </ul>
            </li>
        </ol>
    </div>

    <div class="payment-methods mb-4">
        <div class="payment-method-card" data-method="bank_transfer">
            <i class="bi bi-bank"></i>
            <h6>โอนเงินเข้าบัญชีโรงเรียน</h6>
            <small class="text-muted">ลดหย่อนภาษีได้ 2 เท่า</small>
        </div>
        <div class="payment-method-card" data-method="coffee_support">
            <i class="bi bi-cup-hot"></i>
            <h6>สนับสนุนค่ากาแฟ</h6>
            <small class="text-muted">เป็นกำลังใจให้ผู้พัฒนา</small>
        </div>
    </div>

    <!-- Bank Transfer Details -->
    <div id="bankTransferDetails" class="bank-transfer-details mb-4 d-none">
        <div class="bank-info p-3 bg-light rounded mb-3">
            <h6 class="mb-3">ข้อมูลการโอนเงิน <span class="badge bg-info ms-2">ลดหย่อนภาษีได้ 2 เท่า</span></h6>
            <p class="mb-2">ธนาคารกรุงไทย</p>
            <p class="mb-2">เลขที่บัญชี: 743-042-2462</p>
            <p class="mb-0">ชื่อบัญชี: เงินรายได้สถานศึกษา โรงเรียนบ้านวังด้ง</p>
        </div>

                    <div class="form-group mb-3">
                        <label class="form-label">วันที่โอนเงิน</label>
                        <input type="date" class="form-control" id="transferDate" name="transferDate">
                        <div class="invalid-feedback">กรุณาระบุวันที่โอนเงิน</div>
                    </div>
                  

                    <div class="form-group mb-3">
                        <label class="form-label">เวลาที่โอนเงิน</label>
                        <input type="time" class="form-control" id="transferTime" name="transferTime">
                        <div class="invalid-feedback">กรุณาระบุเวลาที่โอนเงิน</div>
                    </div>

                    <div class="form-group mb-3">
                        <label class="form-label">จำนวนเงินที่โอน</label>
                        <div class="input-group">
                            <span class="input-group-text">฿</span>
                            <input type="number" class="form-control" id="transferAmount" name="transferAmount" 
                                   step="0.01" >
                        </div>
                        <div class="invalid-feedback">กรุณาระบุจำนวนเงินที่โอน</div>
                    </div>

                    <div class="form-group mb-3">
                        <label class="form-label">หลักฐานการโอนเงิน</label>
                        <input type="file" class="form-control" id="slipImage" name="slipImage" 
                               accept="image/*" >
                        <div class="form-text">อัพโหลดรูปสลิปการโอนเงิน (ไฟล์ภาพเท่านั้น)</div>
                        <div class="invalid-feedback">กรุณาอัพโหลดรูปสลิป</div>
                    </div>

                    <!-- Preview Image -->
                    <div id="imagePreview" class="mt-2 d-none">
                        <img src="" alt="Preview" class="img-thumbnail" style="max-height: 200px;">
                    </div>
                </div>

                <!-- Coffee Support Details -->
                <div id="coffeeSupportDetails" class="coffee-support-details mb-4 d-none">
        <div class="qr-code-container p-3 bg-light rounded mb-3 text-center">
            <h6 class="mb-3">สแกน QR Code เพื่อสนับสนุนค่ากาแฟ</h6>
            <img src="https://promptpay.io/0836645989.png" alt="QR Code" class="img-fluid mb-3" style="max-width: 200px;">
            <p class="mb-1">พร้อมเพย์: 083-664-5989</p>
            <p class="text-muted small mb-2">สนับสนุนเท่าไหร่ก็ได้ตามกำลังและความเต็มใจ</p>
            <p class="text-muted small mt-2">💝 ขอบคุณสำหรับกำลังใจที่มอบให้ผู้พัฒนา</p>
        </div>

                    <div class="form-group mb-3">
                        <label class="form-label">วันที่โอนเงิน</label>
                        <input type="date" class="form-control" id="coffeeTransferDate" name="transferDate">
                        <div class="invalid-feedback">กรุณาระบุวันที่โอนเงิน</div>
                    </div>

                    <div class="form-group mb-3">
                        <label class="form-label">เวลาที่โอนเงิน</label>
                        <input type="time" class="form-control" id="coffeeTransferTime" name="transferTime">
                        <div class="invalid-feedback">กรุณาระบุเวลาที่โอนเงิน</div>
                    </div>

                    <div class="form-group mb-3">
                        <label class="form-label">จำนวนเงินที่สนับสนุน</label>
                        <div class="input-group">
                            <span class="input-group-text">฿</span>
                            <input type="number" class="form-control" id="coffeeAmount" name="transferAmount" 
                                   step="0.01" >
                        </div>
                        <div class="invalid-feedback">กรุณาระบุจำนวนเงินที่สนับสนุน</div>
                    </div>

                    <div class="form-group mb-3">
                        <label class="form-label">หลักฐานการโอนเงิน</label>
                        <input type="file" class="form-control" id="coffeeSlipImage" name="slipImage" 
                               accept="image/*" >
                        <div class="form-text">อัพโหลดรูปสลิปการโอนเงิน (ไฟล์ภาพเท่านั้น)</div>
                        <div class="invalid-feedback">กรุณาอัพโหลดรูปสลิป</div>
                    </div>

                    <!-- Preview Image for coffee support -->
                    <div id="coffeeSupportImagePreview" class="mt-2 d-none">
                        <img src="" alt="Preview" class="img-thumbnail" style="max-height: 200px;">
                    </div>
                </div>
            </div>

            <input type="hidden" id="paymentMethod" name="paymentMethod" >

            <!-- Submit Button -->
            <button type="submit" class="btn btn-primary submit-button">
                ยืนยันการลงทะเบียนและชำระเงิน
            </button>
        </form>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="register.js"></script>
</body>
</html>